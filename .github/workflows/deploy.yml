# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy Affected Projects To Firebase
'on':
  push:
    branches:
      - main
      - tst
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - env:
        FIREBASE_TOKEN: '1//0cJZcarCrL7ymCgYIARAAGAwSNwF-L9IrxMCg27L5ssQqyiKjE37iJWGa38aCL2ukjHcoTB9IIB47rsGw9HsdBfRfFc4Om4PePmA'
      - name: Checkout repository (#2)
        uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Install dependencies
        run: npm ci

      - name: Nrwl Nx Production
        uses: MansaGroup/nrwl-nx-action@v2.0.4
        if: ${{ github.ref == 'refs/heads/main' }}
        with:
          targets: deploy-tst

      - name: Nrwl Nx Testing
        uses: MansaGroup/nrwl-nx-action@v2.0.4
        if: ${{ github.ref == 'refs/heads/tst' }}
        with:
          targets: deploy
          args: --FIREBASE_TOKEN=${{secrets.FIREBASE_TOKEN}} --ENV=testing
